<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arkham Section - Scroll Sync FIXED</title>
    
    <style>
        /* ============================================
           ARKHAM SECTION - SISTEMA SCROLL SINCRONIZADO
           ============================================ */
        
        /* RESETEO Y BASE */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 50px 0 150vh 0; /* Espacio adicional para hacer scroll */
        }
        
        /* ============================================
           CONTENEDOR PRINCIPAL CON ALTURA FIJA PARA SCROLL
           ============================================ */
        
        .arkham-scroll-container {
            /* Hacemos el contenedor suficientemente alto para permitir scroll */
            height: 300vh; /* 3 veces la altura del viewport */
            position: relative;
        }
        
        .section-2.isometric.arkham-tabs-section {
            /* Sticky positioning para que se quede fijo mientras hacemos scroll */
            position: sticky;
            top: 50px;
            
            /* Dimensiones y estilos según el original */
            margin: 0 auto;
            max-width: 857px;
            width: 857px;
            max-height: 1025.91px;
            height: 1025.91px;
            padding: 60px 24px;
            
            /* Estilos visuales */
            background: #fff;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        /* FILA PRINCIPAL ISOMÉTRICA */
        .isometric-row {
            display: flex;
            gap: 40px;
            height: 100%;
            align-items: flex-start;
        }
        
        /* ============================================
           COLUMNA IZQUIERDA - HEADLINE Y TABS
           ============================================ */
        
        .box-headline-isometric {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 32px;
        }
        
        /* CONTAINER DEL HEADLINE */
        .cotainer-headline {
            margin-bottom: 24px;
        }
        
        .h2-2.words-up {
            font-size: 4rem;
            font-weight: 300;
            line-height: 1.1;
            margin-bottom: 16px;
            color: #000;
        }
        
        .line {
            display: block;
            text-align: left;
            width: 100%;
        }
        
        .line-text {
            display: inline-block;
        }
        
        .subtitle.color-black {
            font-size: 1.25rem;
            color: #666;
            margin-bottom: 24px;
            line-height: 1.4;
        }
        
        /* BOTÓN CTA */
        .button.secondary.small.mt-16 {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            background: transparent;
            border: 1px solid #333;
            border-radius: 6px;
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-top: 16px;
        }
        
        .button.secondary.small.mt-16:hover {
            background: #333;
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .btn-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .image-7 {
            width: 16px;
            height: 16px;
        }
        
        /* ============================================
           CONTENEDOR DE TABS - DESKTOP
           ============================================ */
        
        .cotainer-vertical-tab.cvt-desk {
            display: flex;
            flex-direction: column;
            gap: 0;
            border-left: 1px solid #eee;
            padding-left: 24px;
        }
        
        .cotainer-vertical-tab.cvt-mobile {
            display: none;
        }
        
        /* ESTILO COMÚN PARA TABS */
        .scroll-tab,
        .scroll-tab-mobile {
            border-bottom: 1px solid #eee;
            padding: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .box-top-bottom-line {
            border-top: 1px solid #eee;
        }
        
        .scroll-tab:hover {
            background-color: #f8f9fa;
        }
        
        /* TAB ACTIVO - Estados según el original */
        .scroll-tab.active .arkham-tab-heading .tagline-2 {
            color: #000 !important;
            font-weight: 600;
        }
        
        .scroll-tab.active .arrow-rights {
            opacity: 0 !important;
        }
        
        /* HEADING DEL TAB */
        .arkham-tab-heading {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .tagline-2 {
            font-size: 0.875rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: #666;
            margin: 0;
            transition: all 0.3s ease;
        }
        
        .scroll-tab:hover .tagline-2 {
            color: #333;
        }
        
        .arrow-rights {
            width: 16px;
            height: 16px;
            opacity: 1;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .scroll-tab:hover .arrow-rights {
            transform: translateX(4px);
        }
        
        /* CONTENIDO DEL TAB */
        .tab-content.hide-mobile {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.6;
            margin: 0;
            
            /* Estados por defecto - cerrado */
            max-height: 0px;
            z-index: -1;
            opacity: 0;
            padding-bottom: 0px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* TAB ACTIVO - expansión completa según original */
        .scroll-tab.active .tab-content.hide-mobile {
            max-height: 70px !important;
            z-index: 1 !important;
            opacity: 1 !important;
            padding-bottom: 20px !important;
        }
        
        /* ============================================
           COLUMNA DERECHA - VISUALIZACIÓN ISOMÉTRICA
           ============================================ */
        
        .box-isometric {
            flex: 1;
            position: relative;
            height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* WRAPPER DE NIVELES ISOMÉTRICOS */
        .levels-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 400px;
            max-height: 400px;
            opacity: 1;
        }
        
        /* NIVELES ISOMÉTRICOS - Estados iniciales según el original */
        .level {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .level.first-level {
            /* Nivel base - opacidad 0 inicialmente como en el original */
            opacity: 0;
            transform: translate(0px, 0px);
            z-index: 1;
        }
        
        .level.float-level {
            /* Niveles flotantes - ocultos y arriba por defecto */
            opacity: 0;
            top: -100%;
            z-index: 2;
        }
        
        /* ============================================
           ESTADOS DE SCROLL - BASADOS EN PORCENTAJE DE SCROLL
           ============================================ */
        
        /* TAB 1 ACTIVO - Solo nivel base visible (como el original) */
        .scroll-state-1 .level.first-level {
            opacity: 1 !important;
            transform: translate(0px, 0px);
        }
        
        .scroll-state-1 .level.float-level {
            opacity: 0 !important;
            top: -100% !important;
        }
        
        /* TAB 2 ACTIVO - Base + nivel 2 */
        .scroll-state-2 .level.first-level {
            opacity: 1 !important;
            transform: translate(0px, 0px);
        }
        
        .scroll-state-2 .level.float-level:nth-of-type(2) {
            opacity: 1 !important;
            top: 0% !important;
            transform: translate(20px, -60px);
        }
        
        .scroll-state-2 .level.float-level:nth-of-type(3),
        .scroll-state-2 .level.float-level:nth-of-type(4) {
            opacity: 0 !important;
            top: -100% !important;
        }
        
        /* TAB 3 ACTIVO - Base + nivel 2 + nivel 3 + Lottie */
        .scroll-state-3 .level.first-level {
            opacity: 1 !important;
            transform: translate(0px, 0px);
        }
        
        .scroll-state-3 .level.float-level:nth-of-type(2) {
            opacity: 1 !important;
            top: 0% !important;
            transform: translate(20px, -60px);
        }
        
        .scroll-state-3 .level.float-level:nth-of-type(3) {
            opacity: 1 !important;
            top: 0% !important;
            transform: translate(40px, -120px);
        }
        
        .scroll-state-3 .level.float-level:nth-of-type(4) {
            opacity: 1 !important;
            top: 0% !important;
            transform: translate(40px, -120px);
        }
        
        /* ============================================
           RESPONSIVE - MOBILE
           ============================================ */
        
        @media (max-width: 768px) {
            .arkham-scroll-container {
                height: 200vh; /* Menos altura en mobile */
            }
            
            .section-2.isometric.arkham-tabs-section {
                max-width: 100%;
                width: 100%;
                height: auto;
                max-height: none;
                padding: 40px 20px;
                position: relative;
                top: 0;
            }
            
            .isometric-row {
                flex-direction: column;
                gap: 24px;
            }
            
            .h2-2.words-up {
                font-size: 2.5rem;
            }
            
            .cotainer-vertical-tab.cvt-desk {
                display: none;
            }
            
            .cotainer-vertical-tab.cvt-mobile {
                display: flex;
                flex-direction: column;
                gap: 0;
                margin-top: 24px;
                border-left: 1px solid #eee;
                padding-left: 24px;
            }
            
            .box-isometric {
                height: 300px;
            }
        }
        
        /* DEBUG STYLES */
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
        }
        
        .scroll-indicator {
            position: fixed;
            top: 50px;
            right: 10px;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 10px;
            z-index: 1000;
        }
    </style>
</head>
<body class="scroll-state-1">
    <!-- DEBUG INFO -->
    <div class="debug-info" id="debugInfo">
        Tab Activo: <span id="currentTab">1</span><br>
        Scroll: <span id="scrollPos">0</span>%<br>
        Animando: <span id="isAnimating">false</span>
    </div>
    
    <div class="scroll-indicator" id="scrollIndicator">
        Zona: <span id="scrollZone">Inicio</span><br>
        Progreso: <span id="scrollProgress">0</span>%
    </div>
    
    <!-- CONTENEDOR DE SCROLL -->
    <div class="arkham-scroll-container">
        <!-- ARKHAM SECTION - ISOMETRIC TABS -->
        <section class="section-2 isometric arkham-tabs-section">
            <div class="row-2 col-3-custom no-margin row isometric-row">
                
                <!-- LEFT COLUMN: HEADLINE AND TABS -->
                <div id="w-node-_3f8cb03d-4198-cf1c-4d0a-bae6cf70bb87-03efec94" class="box-headline-isometric">
                    <div class="cotainer-headline">
                        <!-- MAIN TITLE -->
                        <h2 class="h2-2 words-up">
                            <div class="line">
                                <span class="line-text">Arkham</span>
                            </div>
                        </h2>
                        
                        <!-- SUBTITLE -->
                        <p class="subtitle color-black">The Data &amp; AI Platform powering your company's future.</p>
                        
                        <!-- CTA BUTTON -->
                        <a href="/contact" class="button secondary small mt-16 btn-hover hover-black w-inline-block">
                            <div class="btn-content">
                                <div class="text-block-8">Book a demo</div>
                                <img loading="eager" src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/684f12e6a2f854b06e23b65e_circle-arrow-black.svg" alt="" class="image-7">
                            </div>
                        </a>
                    </div>

                    <!-- DESKTOP TABS CONTAINER -->
                    <div class="cotainer-vertical-tab cvt-desk">
                        <!-- TAB 1: DATA PLATFORM -->
                        <div class="box-top-bottom-line scroll-tab scroll-tab-1 active" data-tab="1">
                            <div class="arkham-tab-heading">
                                <p class="tagline-2">DATA PLATFORM</p>
                                <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/685af73604289ee24118ae55_arrow-right.svg" loading="eager" alt="" class="arrow-rights">
                            </div>
                            <p class="tab-content hide-mobile">A Data Lakehouse built for scale. Our platform ensures full data governance and lineage across your operations.</p>
                        </div>
                        
                        <!-- TAB 2: AI PLATFORM -->
                        <div class="box-bottom-line scroll-tab scroll-tab-2" data-tab="2">
                            <div class="arkham-tab-heading">
                                <p class="tagline-2">AI PLATFORM</p>
                                <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/685af73604289ee24118ae55_arrow-right.svg" loading="eager" alt="" class="arrow-rights">
                            </div>
                            <p class="tab-content hide-mobile">From Generative AI to multiple classes of Machine Learning Models, Arkham is AI tailored to your operations.</p>
                        </div>
                        
                        <!-- TAB 3: AI-POWERED APPLICATIONS -->
                        <div class="box-bottom-line scroll-tab scroll-tab-3" data-tab="3">
                            <div class="arkham-tab-heading">
                                <p class="tagline-2">AI-Powered Applications</p>
                                <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/685af73604289ee24118ae55_arrow-right.svg" loading="eager" alt="" class="arrow-rights">
                            </div>
                            <p class="tab-content hide-mobile">Gain intelligence, control and solve your most complex challenges with your Data and AI tailored to your operations.</p>
                        </div>
                    </div>
                </div>

                <!-- MOBILE TABS CONTAINER -->
                <div id="w-node-_3f8cb03d-4198-cf1c-4d0a-bae6cf70bba9-03efec94" class="cotainer-vertical-tab cvt-mobile">
                    <!-- MOBILE TAB 1 -->
                    <div class="box-top-bottom-line scroll-tab-mobile scroll-tab-1" data-tab="1">
                        <div class="arkham-tab-heading">
                            <p class="tagline-2">PLATAFORMA DE DATOS</p>
                            <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/685af73604289ee24118ae55_arrow-right.svg" loading="eager" alt="" class="arrow-rights">
                        </div>
                        <p class="tab-content hide-mobile">Consolida todos los datos de tu empresa en un Data Lakehouse dedicado a tu operación.</p>
                    </div>
                    
                    <!-- MOBILE TAB 2 -->
                    <div class="box-bottom-line scroll-tab-mobile scroll-tab-2" data-tab="2">
                        <div class="arkham-tab-heading">
                            <p class="tagline-2">Plataforma de AI</p>
                            <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/685af73604289ee24118ae55_arrow-right.svg" loading="eager" alt="" class="arrow-rights">
                        </div>
                        <p class="tab-content hide-mobile">Desde AI Generativo hasta múltiples clases de modelos de Machine Learning.</p>
                    </div>
                    
                    <!-- MOBILE TAB 3 -->
                    <div class="box-bottom-line scroll-tab-mobile scroll-tab-3" data-tab="3">
                        <div class="arkham-tab-heading">
                            <p class="tagline-2">Aplicativos inteligentes</p>
                            <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/685af73604289ee24118ae55_arrow-right.svg" loading="eager" alt="" class="arrow-rights">
                        </div>
                        <p class="tab-content hide-mobile">Accede fácilmente a tus datos con los mejores modelos de Machine Learning y AI Generativa.</p>
                    </div>
                </div>

                <!-- RIGHT COLUMN: ISOMETRIC VISUALIZATION -->
                <div id="w-node-_3f8cb03d-4198-cf1c-4d0a-bae6cf70bbbf-03efec94" class="box-isometric">
                    <!-- ISOMETRIC LEVELS VISUALIZATION -->
                    <div class="levels-wrapper">
                        <!-- LEVEL 1: BASE LAYER -->
                        <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/68670c81fa191298451da48f_Tapa1.png" 
                             loading="eager" 
                             alt="Data Platform Level" 
                             class="level first-level">
                        
                        <!-- LEVEL 2: MIDDLE LAYER -->
                        <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/68670c81e75b1845dbbd60ac_Tapa2.png" 
                             loading="eager" 
                             alt="AI Platform Level" 
                             class="level float-level">
                        
                        <!-- LEVEL 3: TOP LAYER -->
                        <img src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/68670c81149f2caecbc44ebe_Tapa3.png" 
                             loading="eager" 
                             alt="Applications Level" 
                             class="level float-level">
                        
                        <!-- LEVEL 4: LOTTIE ANIMATION -->
                        <div class="level float-level" 
                             data-w-id="3f8cb03d-4198-cf1c-4d0a-bae6cf70bbcc" 
                             data-animation-type="lottie" 
                             data-src="https://cdn.prod.website-files.com/68471fce29939e5703efec7f/6867f65721d27d8f1055bcb9_Landing%20Isomtrico.svg%20(2).json" 
                             data-loop="1" 
                             data-direction="1" 
                             data-autoplay="1">
                             <div style="display:flex;align-items:center;justify-content:center;height:100%;color:#666;font-size:14px;background:rgba(0,0,0,0.05);border-radius:8px;">
                                 🎬 Lottie Animation
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        /**
         * ARKHAM SCROLL SYSTEM - VERSIÓN FINAL SINCRONIZADA
         * ================================================
         * Sistema simple y efectivo que sincroniza scroll con animaciones
         */
        class ArkhamScrollSync {
            constructor() {
                this.currentTab = 1;
                this.isAnimating = false;
                this.container = null;
                this.section = null;
                this.scrollHeight = 0;
                
                // Umbrales de scroll para cada tab (en porcentajes)
                // Optimizados para transiciones suaves
                this.scrollThresholds = {
                    1: { min: 0, max: 0.35 },      // 0% - 35% (un poco más de espacio)
                    2: { min: 0.32, max: 0.68 },   // 32% - 68% (overlap para suavidad)  
                    3: { min: 0.65, max: 1.0 }     // 65% - 100%
                };
                
                this.init();
            }
            
            init() {
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', () => this.setup());
                } else {
                    this.setup();
                }
            }
            
            setup() {
                console.log('🚀 Iniciando Arkham Scroll Sync');
                
                // Elementos del DOM
                this.container = document.querySelector('.arkham-scroll-container');
                this.section = document.querySelector('.arkham-tabs-section');
                
                if (!this.container || !this.section) {
                    console.error('❌ No se encontraron los elementos principales');
                    return;
                }
                
                // Calcular altura total de scroll
                this.scrollHeight = this.container.scrollHeight - window.innerHeight;
                
                // Configurar eventos
                this.setupScrollListener();
                this.setupTabClickListeners();
                this.setupKeyboardControls();
                
                // Estado inicial
                this.activateTab(1, false);
                this.updateDebugInfo();
                
                console.log(`✅ Sistema configurado. Altura de scroll: ${this.scrollHeight}px`);
                
                // Instrucciones
                console.log(`
                🎮 ARKHAM SCROLL SYNC - CONTROLES:
                
                📜 Haz scroll para cambiar tabs automáticamente
                👆 Click en los tabs para cambio manual
                ⌨️  Presiona 1, 2 o 3 para testing
                🐛 window.forceTab(n) - Forzar tab
                📊 window.debugArkham() - Estado del sistema
                
                ✨ Los niveles isométricos se sincronizan con el scroll
                🎬 La animación Lottie aparece en el tab 3
                `);
            }
            
            setupScrollListener() {
                let ticking = false;
                
                window.addEventListener('scroll', () => {
                    if (!ticking) {
                        requestAnimationFrame(() => {
                            this.handleScroll();
                            ticking = false;
                        });
                        ticking = true;
                    }
                });
            }
            
            handleScroll() {
                if (this.isAnimating) return;
                
                const scrollY = window.pageYOffset;
                const scrollPercent = Math.min(scrollY / this.scrollHeight, 1);
                
                // Determinar qué tab debe estar activo
                let newTab = this.currentTab;
                
                // Lógica mejorada con overlapping zones para suavidad
                if (scrollPercent <= this.scrollThresholds[1].max) {
                    newTab = 1;
                } else if (scrollPercent >= this.scrollThresholds[2].min && scrollPercent <= this.scrollThresholds[2].max) {
                    newTab = 2;
                } else if (scrollPercent >= this.scrollThresholds[3].min) {
                    newTab = 3;
                }
                
                // Actualizar debug info
                this.updateScrollDebug(scrollPercent, newTab);
                
                // Cambiar tab si es necesario
                if (newTab !== this.currentTab) {
                    console.log(`📜 Scroll activó tab ${newTab} (${Math.round(scrollPercent * 100)}%)`);
                    this.activateTab(newTab, true);
                }
                
                this.updateDebugInfo();
            }
            
            updateScrollDebug(scrollPercent, detectedTab) {
                const scrollZone = document.getElementById('scrollZone');
                const scrollProgress = document.getElementById('scrollProgress');
                
                if (scrollZone && scrollProgress) {
                    let zone = 'Inicio';
                    if (scrollPercent >= 0.65) zone = 'Zona 3 (Apps)';
                    else if (scrollPercent >= 0.32) zone = 'Zona 2 (AI)';
                    else if (scrollPercent > 0) zone = 'Zona 1 (Data)';
                    
                    scrollZone.textContent = zone;
                    scrollProgress.textContent = Math.round(scrollPercent * 100);
                }
            }
            
            setupTabClickListeners() {
                const tabs = document.querySelectorAll('[data-tab]');
                tabs.forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        e.preventDefault();
                        const tabNumber = parseInt(tab.getAttribute('data-tab'));
                        this.activateTab(tabNumber, true);
                        
                        // Opcional: scroll a la posición correspondiente
                        const targetPercent = (tabNumber - 1) * 0.33 + 0.16; // Centro de cada zona
                        const targetScroll = targetPercent * this.scrollHeight;
                        window.scrollTo({
                            top: targetScroll,
                            behavior: 'smooth'
                        });
                    });
                });
            }
            
            setupKeyboardControls() {
                document.addEventListener('keydown', (e) => {
                    if (e.key >= '1' && e.key <= '3') {
                        e.preventDefault();
                        this.activateTab(parseInt(e.key), true);
                    }
                });
            }
            
            activateTab(tabNumber, withAnimation = true) {
                if (this.isAnimating && withAnimation) return;
                
                const previousTab = this.currentTab;
                this.currentTab = tabNumber;
                
                console.log(`🎯 Activando Tab ${tabNumber} (anterior: ${previousTab})`);
                
                if (withAnimation) {
                    this.isAnimating = true;
                }
                
                // Cambiar clase del body para CSS targeting
                document.body.className = document.body.className
                    .replace(/scroll-state-[1-3]/g, '');
                document.body.classList.add(`scroll-state-${tabNumber}`);
                
                // Actualizar estados visuales
                this.updateTabStates(tabNumber);
                
                if (withAnimation) {
                    setTimeout(() => {
                        this.isAnimating = false;
                        console.log('✅ Animación de tab completada');
                    }, 800);
                }
            }
            
            updateTabStates(activeTab) {
                const allTabs = document.querySelectorAll('[data-tab]');
                allTabs.forEach(tab => {
                    const tabNum = parseInt(tab.getAttribute('data-tab'));
                    if (tabNum === activeTab) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });
            }
            
            updateDebugInfo() {
                const elements = {
                    currentTab: document.getElementById('currentTab'),
                    scrollPos: document.getElementById('scrollPos'),
                    isAnimating: document.getElementById('isAnimating')
                };
                
                if (elements.currentTab) elements.currentTab.textContent = this.currentTab;
                if (elements.isAnimating) elements.isAnimating.textContent = this.isAnimating;
                if (elements.scrollPos) {
                    const scrollPercent = Math.min(window.pageYOffset / this.scrollHeight, 1);
                    elements.scrollPos.textContent = Math.round(scrollPercent * 100);
                }
            }
            
            // API pública para testing
            forceTab(n) {
                if (n >= 1 && n <= 3) {
                    this.activateTab(n, true);
                }
            }
            
            debugInfo() {
                return {
                    currentTab: this.currentTab,
                    isAnimating: this.isAnimating,
                    scrollHeight: this.scrollHeight,
                    currentScrollPercent: Math.round((window.pageYOffset / this.scrollHeight) * 100)
                };
            }
        }
        
        // Inicializar sistema
        const arkhamSync = new ArkhamScrollSync();
        
        // API global para testing
        window.arkhamSync = arkhamSync;
        window.forceTab = (n) => arkhamSync.forceTab(n);
        window.debugArkham = () => console.log(arkhamSync.debugInfo());
    </script>
</body>
</html>